# # #   after preprocessing    # # #

# minimum length = 1
# total length: 132.47 hours
# percentage of
# - repetitions:                   0.10 %
# - filled pauses:                 0.11 %
# - repetitions and filled pauses: 0.01 %
# - hesitations (R or FP):         0.20 %

# minimum length = 5
# total length: 126.44 hours
# percentage of
# - repetitions:                   0.10 %
# - filled pauses:                 0.11 %
# - repetitions and filled pauses: 0.01 %
# - hesitations (R or FP):         0.20 %


# # #   after transcription    # # #

#   m \ a        │    trans.   untrans.
#   ─────────────┼─────────────────────
#   fluent       │   941,297     31,931
#   disfluent.   │   151,960     89,799

# WER = 0.2097 for minimum length 1 
# - insert:      91,127
# - delete:     121,730
# - replace:     61,065
# - nothing:  1,032,192
# - all:      1,306,114

# WER = 0.2 for minimum length 5 
# - insert:      80,837
# - delete:     121,071
# - replace:     54,083
# - nothing:  1,023,776
# - all:      1,279,767


# # #     after alignment      # # #

# CTC default probability comparison
# c = -1:  0.7443
# c = -2:  0.7435
# c = -3:  0.7402
# c = -4:  0.7351
# c = -5:  0.7289
# c = -6:  0.7224
# c = -7:  0.7161
# c = -8:  0.7108
# c = -9:  0.7067
# c = -10: 0.7039

# percentage of
# untranscribed speech reachable           gaps containing untranscribed speech     untranscribed hesitations reachable      gaps containing untranscribed hesitaions
# for cross attention
#   len   │    part      50   total          len   │    part      50   total          len   │    part      50   total          len   │    part      50   total
#   ──────┼────────────────────────          ──────┼────────────────────────          ──────┼────────────────────────          ──────┼────────────────────────
#   0.1   │   16.30   12.48    9.18          0.1   │   12.55    9.23    6.07          0.1   │   13.91   10.06    6.66          0.1   │    9.08    6.56    4.11
#   0.2   │   14.72   11.88    9.05          0.2   │   13.76   10.76    7.43          0.2   │   12.26    9.43    6.52          0.2   │    9.88    7.61    5.01
#   0.3   │   13.58   11.24    8.87          0.3   │   14.58   11.68    8.45          0.3   │   11.06    8.78    6.33          0.3   │   10.38    8.22    5.67
#   0.4   │   12.68   10.66    8.65          0.4   │   15.37   12.49    9.35          0.4   │   10.17    8.20    6.12          0.4   │   10.88    8.75    6.27
#   0.5   │   12.03   10.23    8.46          0.5   │   16.53   13.57   10.42          0.5   │    9.51    7.76    5.94          0.5   │   11.62    9.44    6.95
#   0.6   │   11.23    9.76    8.27          0.6   │   20.22   17.03   13.53          0.6   │    8.72    7.28    5.76          0.6   │   14.14   11.75    8.99
#   0.7   │   10.54    9.33    8.09          0.7   │   25.93   22.35   18.34          0.7   │    8.02    6.82    5.57          0.7   │   18.02   15.28   12.11
#   0.8   │    9.78    8.77    7.77          0.8   │   30.25   26.46   22.40          0.8   │    7.25    6.26    5.26          0.8   │   20.79   17.90   14.68
#   0.9   │    8.93    8.13    7.32          0.9   │   32.78   29.12   25.15          0.9   │    6.35    5.58    4.78          0.9   │   21.94   19.20   16.08
#   1.0   │    8.22    7.57    6.91          1.0   │   34.41   31.00   27.24          1.0   │    5.59    5.01    4.38          1.0   │   22.43   19.99   17.09

# percentage of
# untranscribed speech reachable           gaps containing untranscribed speech     untranscribed hesitations reachable      gaps containing untranscribed hesitaions
# for ctc
#   len   │    part      50   total          len   │    part      50   total          len   │    part      50   total          len   │    part      50   total
#   ──────┼────────────────────────          ──────┼────────────────────────          ──────┼────────────────────────          ──────┼────────────────────────
#   0.1   │   67.01   47.54   36.47          0.1   │   19.27   13.46   10.27          0.1   │   71.99   51.52   39.83          0.1   │   16.08   11.42    8.81
#   0.2   │   62.01   46.10   36.30          0.2   │   23.90   17.66   13.95          0.2   │   66.85   50.17   39.68          0.2   │   20.11   15.09   11.98
#   0.3   │   57.17   43.64   35.43          0.3   │   25.20   19.19   15.74          0.3   │   61.56   47.52   38.71          0.3   │   21.25   16.48   13.54
#   0.4   │   52.07   40.45   33.84          0.4   │   25.72   19.97   16.96          0.4   │   55.70   43.80   36.81          0.4   │   21.62   17.13   14.57
#   0.5   │   47.28   37.21   31.80          0.5   │   27.50   21.66   18.87          0.5   │   50.13   39.99   34.35          0.5   │   22.99   18.52   16.16
#   0.6   │   41.78   34.23   29.78          0.6   │   33.96   28.22   25.08          0.6   │   44.37   36.54   31.96          0.6   │   28.72   24.08   21.43
#   0.7   │   37.24   31.23   27.64          0.7   │   39.63   33.93   30.77          0.7   │   39.31   33.05   29.40          0.7   │   33.56   28.85   26.18
#   0.8   │   33.27   28.31   25.41          0.8   │   42.58   37.15   34.26          0.8   │   34.77   29.66   26.76          0.8   │   35.93   31.47   29.03
#   0.9   │   29.45   25.34   23.02          0.9   │   44.56   39.38   36.86          0.9   │   30.39   26.20   23.91          0.9   │   37.34   33.14   30.98
#   1.0   │   26.06   22.64   20.77          1.0   │   46.12   41.28   39.01          1.0   │   26.50   23.04   21.23          1.0   │   38.34   34.41   32.45

# percentage of
# untranscribed speech reachable           gaps containing untranscribed speech     untranscribed hesitations reachable      gaps containing untranscribed hesitaions
# for ctc (c = -1)
#   len   │    part      50   total          len   │    part      50   total          len   │    part      50   total          len   │    part      50   total
#   ──────┼────────────────────────          ──────┼────────────────────────          ──────┼────────────────────────          ──────┼────────────────────────
#   0.1   │   94.61   81.41   64.56          0.1   │   19.57   16.52   12.90          0.1   │   97.39   84.36   66.47          0.1   │   16.43   14.16   11.17
#   0.2   │   90.51   79.73   64.29          0.2   │   26.88   23.43   18.80          0.2   │   93.69   82.95   66.25          0.2   │   22.87   20.26   16.30
#   0.3   │   86.04   76.56   63.09          0.3   │   28.97   25.57   21.16          0.3   │   88.85   79.47   64.92          0.3   │   24.74   22.20   18.38
#   0.4   │   79.76   71.61   60.40          0.4   │   29.68   26.50   22.63          0.4   │   81.68   73.73   61.72          0.4   │   25.35   23.01   19.64
#   0.5   │   73.58   66.57   57.18          0.5   │   31.24   28.15   24.62          0.5   │   74.44   67.76   57.83          0.5   │   26.60   24.40   21.32
#   0.6   │   67.29   61.68   53.76          0.6   │   38.11   34.97   31.12          0.6   │   67.37   61.97   53.74          0.6   │   32.51   30.23   26.88
#   0.7   │   61.57   56.93   50.34          0.7   │   44.39   41.23   37.34          0.7   │   60.89   56.42   49.67          0.7   │   37.87   35.55   32.16
#   0.8   │   56.15   52.21   46.76          0.8   │   47.51   44.47   40.94          0.8   │   54.63   50.89   45.42          0.8   │   40.40   38.19   35.10
#   0.9   │   50.86   47.51   42.98          0.9   │   49.67   46.70   43.50          0.9   │   48.52   45.36   40.91          0.9   │   41.96   39.86   37.05
#   1.0   │   46.10   43.25   39.46          1.0   │   51.41   48.60   45.72          1.0   │   43.09   40.46   36.80          1.0   │   43.16   41.22   38.65


#   all                   │   cross attention      ctc   ctc (c = -1)          around untranscribed   │   cross attention      ctc   ctc (c = -1)
#   ──────────────────────┼──────────────────────────────────────────          ───────────────────────┼──────────────────────────────────────────
#   position              │            0.8470   0.9247         0.9342          position               │            0.7782   0.9007         0.9224
#   length                │            0.6855   0.7755         0.7662          length                 │            0.6051   0.7376         0.7587
#   position and length   │            0.5940   0.7227         0.7181          position and length    │            0.4925   0.6756         0.7028


# deletions down and nothing or replace up
# disfluencies total = 241.759
# minimum gap size = 0.1
#             │     insert     delete   replace     nothing         all      WER   disf. trans.   disf. trans. %
#   ──────────┼─────────────────────────────────────────────────────────────────────────────────────────────────
#   base      │     91,125    121,739    61,065   1,032,183   1,306,112   0.2097        151,959            62.86
#   partial   │   +486,993   -101,976   -24,469    +126,445    +486,993   0.3538        +81,872            96.72
#   50        │    +96,863    -95,033    -8,694    +103,727     +96,863   0.1904        +78,428            95.30
#   total     │    +12,552    -74,654    -4,190     +78,844     +12,552   0.1575        +62,924            88.88

# minimum gap size = 0.2
#             │     insert    delete   replace     nothing         all      WER   disf. trans.   disf. trans. %
#   ──────────┼────────────────────────────────────────────────────────────────────────────────────────────────
#   base      │     91,125   121,739    61,065   1,032,183   1,306,112   0.2097        151,959            62.86
#   partial   │   +316,180   -97,768   -20,047    +117,815    +316,180   0.2911        +79,787            95.86
#   50        │    +71,752   -92,556    -7,973    +100,529     +71,752   0.1779        +77,082            94.74
#   total     │    +11,064   -74,145    -4,211     +78,356     +11,064   0.1569        +62,634            88.76

# minimum gap size = 0.5
#             │     insert    delete   replace     nothing         all      WER   disf. trans.   disf. trans. %
#   ──────────┼────────────────────────────────────────────────────────────────────────────────────────────────
#   base      │     91,125   121,739    61,065   1,032,183   1,306,112   0.2097        151,959            62.86
#   partial   │   +187,350   -79,129   -10,745     +89,874    +187,350   0.2487        +64,880            89.69
#   50        │    +43,198   -72,846    -5,574     +78,420     +43,198   0.1769        +60,613            87.93
#   total     │     +8,060   -61,731    -4,050     +65,781      +8,060   0.1645        +51,813            84.29

# minimum gap size = 1
#             │    insert    delete   replace     nothing         all      WER   disf. trans.   disf. trans. %
#   ──────────┼───────────────────────────────────────────────────────────────────────────────────────────────
#   base      │    91,125   121,739    61,065   1,032,183   1,306,112   0.2097        151,959            62.86
#   partial   │   +76,809   -46,349    -4,721     +51,070     +76,809   0.2167        +37,165            78.23
#   50        │   +18,519   -42,091    -2,774     +44,865     +18,519   0.1869        +34,043            76.94
#   total     │    +4,177   -37,281    -2,396     +39,677      +4,177   0.1820        +30,349            75.41


# # # after gap classification # # #

# TP, FP, TN, FN = 17882 1769 12758 8571
# classificatin model metrics
#   metric      │    score
#   ────────────┼─────────
#   accuracy    │   0.7477
#   precision   │   0.9100
#   recall      │   0.6760
#   f score     │   0.7757

#                   │   transcribed   not transcribed       sum          not predicted   │   no untrans.   untrans.          predicted   │   no untrans.   untrans.
#   ────────────────┼──────────────────────────────────────────          ────────────────┼─────────────────────────          ────────────┼─────────────────────────
#   predicted       │        13,202            15,478    28,680          no trans,       │         12787        696          no trans.   │          8607       5967
#   not predicted   │         1,079             1,450     2,529          trans.          │          1000         44          trans.      │          7467       4412
#   not in gap      │       153,975             3,952   157,927
#   sum             │       168,256            20,880

# number of gaps
# - total          40,980
# - predicted      26,453
# - not predicted  14,527

# number of words
# - total         189,136
# - in gaps        31,209

# # #  after retranscription   # # #

#   whisper       │   empty      new   not new          wav2vec2      │    empty     new   not new          libriSpeech LM   │    empty     new   not new          Switchboard LM   │    empty     new   not new          sb-hesitation LM   │    empty     new   not new
#   ──────────────┼───────────────────────────          ──────────────┼───────────────────────────          ─────────────────┼───────────────────────────          ─────────────────┼───────────────────────────          ───────────────────┼───────────────────────────
#   empty         │       0   18,733    10,988          empty         │        0   4,744     9,263          empty            │        0   1,748     8,827          empty            │        0   6,688     9,621          empty              │        0   6,908     9,636
#   transcribed   │     427    4,634   163,196          transcribed   │      334   1,773   166,150          transcribed      │      488     834   166,935          transcribed      │      613   2,191   165,453          transcribed        │      623   2,231   165,403
#   not trans.    │   8,357    9,851     2,672          not trans.    │   11,583   7,854     1,443          not trans.       │   15,576   4,210     1,094          not trans.       │   12,151   6,947     1,782          not trans.         │   12,054   7,009     1,817

# initially untranscribed: 20,880

#                               │      WER
#   ────────────────────────────┼─────────
#   whisper                     │   0.2425
#   wav2vec2                    │   0.2049
#   wav2vec2 libriSpeech LM     │   0.2392
#   wav2vec2 Switchboard LM     │   0.2362
#   wav2vec2 sb-hesitation LM   │   0.2359


# # #         general          # # #

